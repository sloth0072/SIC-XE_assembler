 COPY START 0
 EXTDEF BUFFER, BUFEND, LENGTH
 EXTREF RDRED, WRREC
 FIRST STL RETADR
3 CLOOP +JSUB RDREC
7 LDA LENGTH
A COMP #0
D JEQ ENGFIL
10 +JSUB WRREC
14 J CLOOP
17 ENDFIL LDA EOF
1A STA BUFFER
1D LDA #3
20 STA LENGTH
23 +JSUB WRREC
27 J @RETADR
2A EOF BYTE C`EOF`
2D RETADR RESW 1
30 LENGTH RESW 1
33 BUFFER RESB 4096
 RDREC CSECT
 EXTREF BUFFER, LENGTH, BUFEND
 CLEAR X
2 CLEAR A
4 CLEAR S
6 +LDT #4096
A RLOOP TD INPUT
D JEQ RLOOP
10 RD INPUT
13 COMPR A, S
15 JEQ EXIT
18 +STCH BUFFER,X
1C TIXR T
1E JLT RLOOP
21 EXIT +STX LENGTH
25 RSUB
28 INPUT BYTE X`F1`
29 MAXLEN WORD 4096
 WRREC CSECT
 EXTREF LENGTH, BUFFER
 CLEAR X
2 +LDT LENGTH
6 WLOOP TD OUTPUT
9 JEQ WLOOP
C +LDCH BUFFER,X
10 WD OUTPUT
13 TIXR T
15 JLT WLOOP
18 RSUB
/ END FIRST
